(function(a){function c(c,f,g,h,i){var j=[];for(var k=0;k<f.length;k++){var l=f[k];for(var m=0;m<h.length;m++){if(h[m]["id"]==l){j[k]=h[m];break}}}c.append(d(a(g).html(),j));for(var k=0;k<f.length;k++){var n=j[k];a('a[rel="__tsd-'+n.id+'"]').click(n,function(c){if(b.ga_tracking!=null&&typeof _gaq!="undefined"){_gaq.push(["_trackEvent",b.ga_tracking,i["api"],c.data.id+": "+c.data.name])}var d=a(this).attr("href");var f=setTimeout('window.location.href = "'+d+'";',500);e("log_click",{product:c.data.id,api:i.api,metadata:i},function(){clearTimeout(f);window.location.href=d});return false})}a('a[rel|="__tsd"]').removeAttr("rel")}function d(a,b){var c="";for(var d=0;d<b.length;d++){var e=b[d];var f=a.replace(new RegExp("<a","g"),'<a rel="__tsd-'+e["id"]+'"');for(var g in e){f=f.replace(new RegExp("{"+g+"}","g"),e[g])}c+=f}return c}function e(c,d,e){d.key=b.key;var f="http://api.thesocialdigits.com/v1/"+c+"?callback=?";var g={payload:JSON.stringify(d)};a.getJSON(f,g,e)}var b={key:"",datasource:function(a,b){},ga_tracking:"The Social Digits"};a.thesocialdigits=function(c){a.extend(b,c)};a.fn.thesocialdigits=function(a,d,f){var g=this;e(a,d,function(e){if("result"in e){var h={api:a,args:d};b.datasource(e.result,function(a){c(g,e.result,f,a,h)})}})}})(jQuery)
