(function(a){function c(b,c,f,g,h){var i=[];for(var j=0;j<c.length;j++){var k=c[j];for(var l=0;l<g.length;l++){if(g[l]["id"]==k){i[j]=g[l];break}}}b.append(d(a(f).html(),i));for(var j=0;j<c.length;j++){var k=c[j];a('a[rel="__tsd-'+k+'"]').click({id:k},function(b){var c=a(this).attr("href");var d=setTimeout('window.location.href = "'+c+'";',500);e("__log_click",{product:b.data.id,metadata:h},function(){clearTimeout(d);window.location.href=c});return false})}a('a[rel|="__tsd"]').removeAttr("rel")}function d(a,b){var c="";for(var d=0;d<b.length;d++){var e=b[d];var f=a.replace(new RegExp("<a","g"),'<a rel="__tsd-'+e["id"]+'"');for(var g in e){f=f.replace(new RegExp("{"+g+"}","g"),e[g])}c+=f}return c}function e(c,d,e){d.key=b.key;var f="http://api.thesocialdigits.com/v1/"+c+"?callback=?";var g={payload:JSON.stringify(d)};a.getJSON(f,g,e)}var b={key:"",datasource:function(a,b){}};a.thesocialdigits=function(a){b.key=a.key;b.datasource=a.datasource};a.fn.thesocialdigits=function(a,d,f){var g=this;e(a,d,function(e){if("result"in e){var h={api:a,args:d};b.datasource(e.result,function(a){c(g,e.result,f,a,h)})}})}})(jQuery)
